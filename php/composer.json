{
  "name": "google/protobuf",
  "type": "library",
  "description": "proto library for PHP",
  "keywords": ["proto"],
  "homepage": "https://developers.google.com/protocol-buffers/",
  "license": "BSD-3-Clause",
  "require": {
    "php": ">=8.1.0"
  },
  "provide": {
    "ext-protobuf": "*"
  },
  "require-dev": {
    "phpunit/phpunit": "~10.5"
  },
  "autoload": {
    "psr-4": {
      "Google\\Protobuf\\": "src/Google/Protobuf",
      "GPBMetadata\\Google\\Protobuf\\": "src/GPBMetadata/Google/Protobuf"
    }
  },
  "autoload-dev": {
    "psr-4": {
      "": "tmp"
    },
    "classmap": [
      "tests/generated_previous"
    ]
  },
  "scripts": {
    "compile_extension": "./tests/compile_extension.sh",
    "generate_test_protos": "./generate_test_protos.sh",
    "generate_class_metadata_php": [
      "@generate_test_protos",
      "mkdir -p tmp/class-metadata",
      "php bin/class-metadata.php -s src -o tmp/class-metadata/src-php.json"
    ],
    "generate_class_metadata_ext": [
      "@generate_test_protos",
      "mkdir -p tmp/class-metadata",
      "php -dextension=ext/google/protobuf/modules/protobuf.so bin/class-metadata.php -s src -o tmp/class-metadata/src-ext.json"
    ],
    "generate_class_metadata": [
      "@generate_class_metadata_php",
      "@generate_class_metadata_ext"
    ],
    "phpunit": [
      "vendor/bin/phpunit"
    ],
    "phpunit_ext": [
      "USE_ZEND_ALLOC=0 ZEND_DONT_UNLOAD_MODULES=1 php -dextension=ext/google/protobuf/modules/protobuf.so vendor/bin/phpunit"
    ],
    "test": [
      "@generate_test_protos",
      "@phpunit"
    ],
    "test_c": [
      "@compile_extension",
      "@generate_test_protos",
      "@phpunit_ext"
    ],
    "test_valgrind": [
      "@compile_extension",
      "@generate_test_protos",
      "FORCE_C_EXT=1 ZEND_DONT_UNLOAD_MODULES=1 USE_ZEND_ALLOC=0 valgrind --leak-check=full --error-exitcode=1 php -dextension=ext/google/protobuf/modules/protobuf.so vendor/bin/phpunit"
    ],
    "aggregate_metadata_test": [
      "./generate_test_protos.sh --aggregate_metadata",
      "@phpunit"
    ]
  },
  "config": {
    "process-timeout": 1200
  }
}
